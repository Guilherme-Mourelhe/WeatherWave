<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - WeatherWave</title>

<script src="https://accounts.google.com/gsi/client" async></script>
    <script src="https://unpkg.com/jwt-decode/build/jwt-decode.js"></script>
 <script>
        function handleCredentialResponse(response) {
            const data = jwt_decode(response.credential);
            console.log(data);

            // Divide o nome completo em palavras e pega apenas as duas primeiras
            const nameParts = data.name.split(' ');
            const firstName = nameParts[0];
            const secondName = nameParts.length > 1 ? nameParts[1] : '';
            const shortName = firstName + ' ' + secondName;

            // Atualiza o conteúdo dos elementos HTML com os dados do usuário
            fullName.textContent = shortName;
            picture.setAttribute("src", data.picture);

            // Oculta o botão de login do Google após o login bem-sucedido
            document.getElementById("buttonDiv").style.display = "none";

            // Mostra o nome e a foto do usuário
            document.getElementById("userDetails").style.display = "block";
        }

        window.onload = function () {
            google.accounts.id.initialize({
                client_id: "189717827051-momovhba9n6hmlgk7thq4qf1hri8dgn1.apps.googleusercontent.com",
                callback: handleCredentialResponse
            });

            google.accounts.id.renderButton(
                document.getElementById("buttonDiv"),
                {
                    theme: "filled_black",
                    size: "medium",
                    type: "standard",
                    shape: "Rectangular",
                    text: "signin_with",
                    logo_alignment: "left",
                    width: "200"
                }
            );
            google.accounts.id.prompt();
        }
    </script>
</head>

<body>

    <!-- Conteúdo relacionado ao login, como o botão do Google e formulário de login, se aplicável -->

    <!-- Exemplo de elemento HTML para mostrar informações do usuário após o login -->
    <div id ="buttonDiv"></div> <!-- Adicionado elemento para o botão de login -->
    <div id="userDetails" style="display: none;">
        <img id="picture" />
        <p id="fullName"></p>
    </div>

</body>
</html>